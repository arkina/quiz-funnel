/*!
 * Fancy Countdown v1.2
 *
 * Copyright 2011, Rafael Dery
 *
 * Only for sale at the envato marketplaces
 */

(function(c){c.fancyCountdown={version:"1.2"};c.fn.fancyCountdown=function(P){function Q(){O=Date.UTC(a.year,a.month-1,a.day,a.hour-a.timezone,a.minute,a.second);var b=O-(new Date).getTime(),d=Math.floor(b/1E3),e=Math.floor(d/60),h=Math.floor(e/60),i=Math.floor(h/24);d%=60;e%=60;h%=24;var l=Math.floor(d%10);d=Math.floor(d/10);var x=Math.floor(e%10);e=Math.floor(e/10);var y=Math.floor(h%10);h=Math.floor(h/10);var z=Math.floor(i%10),A=Math.floor(Math.floor(i/10)%10);i=Math.floor(i/100);if(!C){E=l;F=
d;G=x;H=e;I=y;J=h;K=z;L=A;M=i;for(var k=-2,j=0;j<4;++j){if(a.digits.seconds){o&&o[j].text(f(l+k,0,9));p&&p[j].text(f(d+k,0,5))}if(a.digits.minutes){q&&q[j].text(f(x+k,0,9));r&&r[j].text(f(e+k,0,5))}if(a.digits.hours){s&&s[j].text(f(y+k,0,9));t&&t[j].text(f(h+k,0,2))}if(a.digits.days){u&&u[j].text(f(z+k,0,9));v&&v[j].text(f(A+k,0,9));w&&w[j].text(f(i+k,0,9))}++k}}C=true;if(b>0){if(E!=l){o&&m(o,f(l-2,0,9));E=l}if(F!=d&&p){m(p,f(d-2,0,5));F=d}if(G!=x&&q){m(q,f(x-2,0,9));G=x}if(H!=e&&r){m(r,f(e-2,0,5));
H=e}if(I!=y&&s){m(s,f(y-2,0,9));I=y}if(J!=h&&t){m(t,f(h-2,0,2));J=h}if(K!=z&&u){m(u,f(z-2,0,9));K=z}if(L!=A&&v){m(v,f(A-2,0,9));L=A}if(M!=i&&w){m(w,f(i-2,0,9));M=i}}else{c.fancyCountdown.stop();c.fancyCountdown.reset();a.callback()}}function m(b,d){b[0].animate({top:-(c(b[0]).height()-a.topDigitOffset)},300);b[1].animate({top:0},300);b[2].animate({top:a.digitUnitHeight-a.bottomDigitOffset},300);b[3].animate({top:a.digitUnitHeight},300,function(){var e=b.pop();c(e).css("top",-c(e).height()+"px");e.text(d);
b.unshift(e)})}function f(b,d,e){return b<0?e+b+1:b>e?d+b-e-1:b}function n(b){g.prepend("<div style='width:"+a.digitUnitWidth+"px;height:"+a.digitUnitHeight+"px;background:"+a.fillColor+";' class='fc-digitUnit fc-"+b+"'><div class='fc-digits'><ul><li>8</li><li>9</li><li>0</li><li>1</li></ul></div><img src='"+a.overlayImageUrl+"' width="+a.digitUnitWidth+" height="+a.digitUnitHeight+" class='fc-digitOverlay' /></div>");b=g.children("div:first").find(".fc-digits li").css({width:a.digitUnitWidth+"px",
"line-height":a.digitUnitHeight+"px"});var d=[];d[0]=c(b[0]).css("top",-c(b[0]).height()+"px");d[1]=c(b[1]).css("top",-(c(b[0]).height()-a.topDigitOffset)+"px");d[2]=c(b[2]).css("top","0px");d[3]=c(b[3]).css("top",a.digitUnitHeight-a.bottomDigitOffset+"px");return d}function N(){g.prepend("<div style='width:"+a.colonUnitWidth+"px;height:"+a.digitUnitHeight+"px;background:"+a.fillColor+";' class='fc-digitUnit'><div style='width:"+a.colonUnitWidth+"px;line-height:"+a.digitUnitHeight+"px;' class='fc-colon'>:</div><img src='"+
a.overlayImageUrl+"' width="+a.digitUnitWidth+" height="+a.digitUnitHeight+" class='fc-digitOverlay' /></div>")}function D(b,d){g.append("<div class='fc-captions'>"+b+"</div>");d-=g.find("div:last").width()*0.5;g.find("div:last").css({left:d,top:a.digitUnitHeight})}var a=c.extend({},c.fn.fancyCountdown.defaults,P),g,B,O,C=false,E,F,G,H,I,J,K,L,M,o,p,q,r,s,t,u,v,w;c.fancyCountdown.start=function(){if(!B){C=false;B=setInterval(Q,100)}};c.fancyCountdown.stop=function(){if(B){clearInterval(B);B=null}};
c.fancyCountdown.reset=function(){g.find(".fc-digits li").stop(true,true);for(var b=0;b<4;++b){o&&o[b].text((8+b)%10);p&&p[b].text((4+b)%6);q&&q[b].text((8+b)%10);r&&r[b].text((4+b)%6);s&&s[b].text((8+b)%10);t&&t[b].text((1+b)%3);u&&u[b].text((8+b)%10);v&&v[b].text((8+b)%10);w&&w[b].text((8+b)%10)}};c.fancyCountdown.fillColor=function(b){g.children(".fc-digitUnit").css("background",b)};c.fancyCountdown.targetDate=function(b,d,e,h,i,l){h=h||0;i=i||0;l=l||0;a.year=parseInt(b);a.month=parseInt(d);a.day=
parseInt(e);a.hour=parseInt(h);a.minute=parseInt(i);a.second=parseInt(l);C=false};c.fancyCountdown.timezone=function(b){a.timezone=parseFloat(b)};return this.each(function(){g=c(this);g.addClass("fc-panel");if(a.digits.seconds){o=n("seconds");p=n("seconds")}if(a.digits.minutes){a.digits.seconds&&N();q=n("minutes");r=n("minutes")}if(a.digits.hours){a.digits.minutes&&N();s=n("hours");t=n("hours")}if(a.digits.days){a.digits.days&&N();if(a.dayDigitsAmount>0)u=n("days");if(a.dayDigitsAmount>1)v=n("days");
if(a.dayDigitsAmount>2)w=n("days")}g.find(".fc-digits ul li, .fc-colon").css("font-size",a.digitSize);if(a.captions){var b=parseInt(g.children(".fc-digitUnit").css("margin-right"))*0.5;a.digits.seconds&&D(a.captionTitles.seconds,c(g.children(".fc-seconds")[1]).position().left-b);a.digits.minutes&&D(a.captionTitles.minutes,c(g.children(".fc-minutes")[1]).position().left-b);a.digits.hours&&D(a.captionTitles.hours,c(g.children(".fc-hours")[1]).position().left-b);a.digits.days&&D(a.captionTitles.days,
a.digitUnitWidth*a.dayDigitsAmount*0.5+b*a.dayDigitsAmount)}a.autoStart&&c.fancyCountdown.start();c(window).blur(c.fancyCountdown.stop);c(window).focus(c.fancyCountdown.start)})};c.fn.fancyCountdown.defaults={year:2012,month:12,day:31,hour:0,minute:0,second:0,digitUnitWidth:60,digitUnitHeight:80,colonUnitWidth:20,topDigitOffset:25,bottomDigitOffset:27,timezone:0,dayDigitsAmount:3,fillColor:"#005152",autoStart:true,captions:true,digits:{days:true,hours:true,minutes:true,seconds:true},captionTitles:{days:"Days",
hours:"Hours",minutes:"Minutes",seconds:"Seconds"},callback:function(){},digitSize:57,overlayImageUrl:"images/fancyCountdown/overlay.png"}})(jQuery);



